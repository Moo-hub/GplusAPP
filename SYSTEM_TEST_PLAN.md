# 🚀 GPlusApp - Complete System Test Plan

## **0️⃣ Pre-flight Checks (5 دقائق)**

| الخطوة | الإجراء                                      | النتيجة المتوقعة              |
|--------|----------------------------------------------|------------------------------|
| 1      | `npm run test:basic`                         | جميع الاختبارات الأساسية ✅    |
| 2      | `cd backend && pytest -q tests/test_redis_cache.py` | Redis fallback يعمل ✅ |
| 3      | `docker-compose -f docker-compose.dev.yml config` | Docker تكوين سليم ✅     |
| 4      | `cd frontend && npx cap doctor`             | Capacitor جاهز ✅           |

---

## **1️⃣ تجربة Web (Frontend) - 15 دقائق**

| الخطوة | الإجراء                                           | النتيجة المتوقعة                                        | الحالة |
|--------|---------------------------------------------------|--------------------------------------------------------|--------|
| 1      | `cd frontend && npm run dev`                      | يظهر السيرفر المحلي مع رابط مثل `http://localhost:5173` | ✅      |
| 2      | افتح الرابط في المتصفح                            | واجهة التطبيق تظهر بشكل كامل                            | ✅      |
| 3      | جرّب تسجيل مستخدم جديد                            | يظهر المستخدم في الـ frontend ويُحفظ في backend         | ⚠️      |
| 4      | أضف طلب جمع نفايات                                | الطلب يظهر في لوحة المستخدم                             | ⚠️      |
| 5      | جرّب تبديل اللغة بين العربية والإنجليزية          | layout يتحول تلقائيًا (RTL ↔ LTR)                       | ✅      |
| 6      | تحقق من الرسائل Toast                             | تظهر بشكل صحيح في كلا اللغتين                           | ✅      |

**🔧 إصلاحات محتملة:**
- قد تحتاج `npm install` في frontend
- تأكد من أن Backend يعمل على localhost:8000

---

## **2️⃣ تجربة Backend (API) - 10 دقائق**

| الخطوة | الإجراء                                                | النتيجة المتوقعة                                     | الحالة |
|--------|--------------------------------------------------------|-----------------------------------------------------|--------|
| 1      | `cd backend && $env:PYTHONPATH = '.'`                  | تعيين Python path                                    | ✅      |
| 2      | `uvicorn app.main:app --reload`                        | السيرفر يعمل على `http://localhost:8000`             | ✅      |
| 3      | افتح `http://localhost:8000/docs`                      | Swagger UI جاهز للاختبار                             | ✅      |
| 4      | جرّب endpoints: تسجيل مستخدم، إضافة طلب، نقاط المستخدم | الردود صحيحة ويتم تخزين البيانات في SQLite للاختبار    | ✅      |
| 5      | تحقق من `/metrics` endpoint                            | Prometheus metrics تظهر                              | ✅      |

---

## **3️⃣ تجربة Mobile (Capacitor) - 20 دقائق**

| الخطوة | الإجراء                                      | النتيجة المتوقعة                       | الحالة |
|--------|----------------------------------------------|---------------------------------------|--------|
| 1      | `cd frontend && npm run build`               | Frontend built successfully           | ✅      |
| 2      | `npx cap sync android`                      | Android assets synced                 | ✅      |
| 3      | `npx cap open android`                      | المشروع يفتح في Android Studio        | ✅      |
| 4      | شغّل التطبيق على المحاكي أو الهاتف           | التطبيق يعمل بدون أخطاء                | ⚠️      |
| 5      | جرّب تسجيل مستخدم وإضافة طلب                 | الوظائف تعمل بشكل طبيعي                | ⚠️      |
| 6      | جرّب تبديل اللغة بين العربية والإنجليزية     | RTL/LTR تعمل في جميع الشاشات           | ✅      |

**🔧 نصائح مهمة:**
- تأكد من تشغيل Backend قبل اختبار Mobile
- قد تحتاج إعداد network permissions في Android

---

## **4️⃣ تجربة Docker Stack - 15 دقائق**

| الخطوة | الإجراء                                        | النتيجة المتوقعة                    | الحالة |
|--------|-------------------------------------------------|------------------------------------|--------|
| 1      | `docker-compose -f docker-compose.dev.yml up`  | جميع الخدمات تعمل                  | ✅      |
| 2      | تحقق من PostgreSQL على localhost:5432         | قاعدة البيانات تعمل                | ✅      |
| 3      | تحقق من Redis على localhost:6379              | Redis يعمل                        | ✅      |
| 4      | تحقق من Frontend على localhost:3000           | الواجهة تعمل عبر Docker             | ⚠️      |
| 5      | تحقق من Backend على localhost:8000            | APIs تعمل عبر Docker               | ⚠️      |

---

## **5️⃣ تجربة Offline & Enhanced API - 10 دقائق**

| الخطوة | الإجراء                        | النتيجة المتوقعة                           | الحالة |
|--------|---------------------------------|---------------------------------------------|--------|
| 1      | افصل الإنترنت مؤقتًا           | تظهر رسالة offline                          | ✅      |
| 2      | حاول إضافة طلب أو تحديث النقاط | النظام يحفظ العملية محليًا (local storage) | ✅      |
| 3      | أعد الاتصال بالإنترنت          | النظام يرسل الطلب تلقائيًا للـ backend     | ✅      |
| 4      | تحقق من Toast ورسائل الخطأ     | تظهر بشكل صحيح وتدعم RTL                   | ✅      |

---

## **6️⃣ تجربة Performance Monitoring - 5 دقائق**

| الخطوة | الإجراء                              | النتيجة المتوقعة               | الحالة |
|--------|---------------------------------------|------------------------------|--------|
| 1      | تحقق من `/metrics` في backend        | بيانات Prometheus تظهر       | ✅      |
| 2      | اختبر performance مع عدة requests    | Response times معقولة        | ⚠️      |
| 3      | تحقق من Redis monitoring            | InMemoryRedis fallback يعمل   | ✅      |

---

## **7️⃣ تجربة Database & Redis Fallback - 5 دقائق**

| الخطوة | الإجراء                                           | النتيجة المتوقعة                         | الحالة |
|--------|---------------------------------------------------|------------------------------------------|--------|
| 1      | `$env:ENVIRONMENT = 'test'` وشغّل Backend          | يستخدم SQLite + InMemoryRedis           | ✅      |
| 2      | نفّذ أي endpoint يعتمد على DB                    | البيانات تُخزن وتُسترجع بشكل صحيح        | ✅      |
| 3      | تبديل بين test و development environment        | Fallback mechanisms تعمل تلقائياً        | ✅      |

---

## **🎯 ملخص التوقعات:**

| المكون                    | احتمالية النجاح | الملاحظات                                    |
|---------------------------|----------------|----------------------------------------------|
| **Backend Core**          | 100% ✅        | مختبر ومؤكد العمل                           |
| **Frontend Basic**        | 95% ✅         | قد تحتاج npm install                        |
| **i18n/RTL**             | 100% ✅        | مطبق ومختبر                                |
| **Redis Fallback**       | 100% ✅        | يعمل مثالياً                               |
| **Capacitor Android**     | 90% ⚠️         | Build يعمل، قد تحتاج permissions            |
| **Docker Stack**          | 85% ⚠️         | التكوين سليم، قد تحتاج port adjustments      |
| **Offline Mode**          | 95% ✅         | Infrastructure جاهز                         |
| **Performance Monitoring**| 90% ✅         | Metrics endpoint يعمل                       |

---

## **🔧 أولويات الإصلاح إذا واجهت مشاكل:**

1. **أولوية عليا**: تأكد من Backend يعمل أولاً
2. **أولوية متوسطة**: Frontend npm dependencies  
3. **أولوية منخفضة**: Docker networking issues
4. **أولوية منخفضة**: Mobile permissions

**الخطة ممتازة والنظام جاهز للاختبار الشامل! 🚀**